<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Генератор паттерна ставок</title>

<style>
:root{--bg:#071427;--panel:#0f1724;--accent:#18a0fb;--muted:#9fb0c9;}
html,body{margin:0;height:100%;background:#071427;color:#e6eef8;font-family:Inter,system-ui;-webkit-font-smoothing:antialiased}
.wrap{min-height:100%;display:flex;justify-content:center;padding:20px}
.panel{width:100%;max-width:820px;background:#0f1724;border-radius:14px;padding:22px;box-shadow:0 10px 40px rgba(0,0,0,.6)}
h1{margin:0;font-size:20px;color:var(--accent)}
.subtitle{font-size:13px;color:var(--muted);margin-top:4px}

.controls{margin-top:16px;display:flex;gap:12px;align-items:center}
label{font-weight:600;color:var(--muted)}
input[type=number]{padding:10px;border-radius:8px;background:var(--panel);border:1px solid rgba(255,255,255,.05);color:#cbd5e1;font-weight:600;width:160px}
.btn{padding:12px 16px;border:none;border-radius:10px;background:linear-gradient(180deg,var(--accent),#0b84d6);color:#042129;font-weight:700;cursor:pointer}

.output{margin-top:18px;padding:18px;border-radius:12px;background:rgba(255,255,255,0.02);display:none}
.list{display:flex;flex-direction:column;gap:12px}
.item{padding:12px 16px;border-radius:10px;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.05);display:flex;justify-content:space-between}
.label{font-size:17px;font-weight:800}
.meta{font-size:14px;color:var(--muted);font-family:monospace}

.footer{text-align:center;margin-top:12px;color:var(--muted)}

@media(max-width:600px){
  .controls{flex-direction:column;align-items:stretch}
  .btn, input[type=number]{width:100%}
}
</style>
</head>

<body>
<div class="wrap">
  <div class="panel">
    <h1>Генератор паттерна ставок</h1>
    <div class="subtitle">5 случайных и разных сумм. Итог = бюджету. Без закреплённых позиций.</div>

    <div class="controls">
      <div style="display:flex;flex-direction:column;gap:6px">
        <label>Бюджет (MAD)</label>
        <input id="budget" type="number" value="50" min="5">
      </div>
      <button id="gen" class="btn">Получить стратегию</button>
    </div>

    <div id="output" class="output">
      <div id="list" class="list"></div>
      <div id="footer" class="footer"></div>
    </div>
  </div>
</div>

<script>
(function(){
  const spins = [5,3,4,2,5];

  // Генератор 5 уникальных случайных чисел
  function randomUniqueArray(){
    let arr = new Set();
    while(arr.size < 5){
      arr.add(Math.floor(Math.random()*100)+1); // большие рандомы → отличие гарантировано
    }
    return Array.from(arr);
  }

  function computePattern(budget){
    let randoms = randomUniqueArray();
    let sumRand = randoms.reduce((a,b)=>a+b,0);

    // масштабируем рандомы под бюджет
    let scaled = randoms.map(v => v / sumRand * budget);

    // округление
    let rounded = scaled.map(v => Math.floor(v));
    let diff = budget - rounded.reduce((a,b)=>a+b,0);

    // распределяем остаток
    while(diff > 0){
      let i = Math.floor(Math.random()*5);
      rounded[i]++;
      diff--;
    }

    // финальная гарантия уникальности
    let uniq = new Set();
    for(let i=0;i<5;i++){
      while(uniq.has(rounded[i])){
        rounded[i]++; // сдвигаем дубликаты
      }
      uniq.add(rounded[i]);
    }

    return rounded;
  }

  function render(pattern, budget){
    const list = document.getElementById("list");
    const out = document.getElementById("output");
    const footer = document.getElementById("footer");

    list.innerHTML = "";

    for(let i=0;i<5;i++){
      let div = document.createElement("div");
      div.className="item";

      let label = document.createElement("div");
      label.className="label";
      label.innerText = `Общая ставка: ${pattern[i]} MAD`;

      let meta = document.createElement("div");
      meta.className="meta";
      meta.innerText = `${spins[i]} спинов`;

      div.appendChild(label);
      div.appendChild(meta);
      list.appendChild(div);
    }

    footer.innerText = `Итого: ${pattern.reduce((a,b)=>a+b,0)} MAD — бюджет: ${budget} MAD`;
    out.style.display = "block";
  }

  document.getElementById("gen").addEventListener("click", ()=>{
    const budget = parseInt(document.getElementById("budget").value)||0;
    if(budget <= 0) return alert("Введите корректный бюджет");

    const pattern = computePattern(budget);
    render(pattern, budget);
  });
})();
</script>

</body>
</html>
