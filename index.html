<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>مولّد نمط الرهانات — وضع الهكر</title>

  <style>
    :root{
      --bg:#020617;
      --bg-alt:#020817;
      --panel:#050816;
      --panel-soft:#0b1220;
      --accent:#22c55e;
      --accent-soft:rgba(34,197,94,0.2);
      --accent-strong:#4ade80;
      --muted:#9ca3af;
      --danger:#f97373;
      --text:#e5e7eb;
      --badge-bg:rgba(34,197,94,0.14);
      --border-subtle:rgba(148,163,184,0.25);
    }

    *{
      box-sizing:border-box;
    }

    html,body{
      margin:0;
      height:100%;
      background:radial-gradient(circle at top,#0b1120,#020617 55%,#000 100%);
      color:var(--text);
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
      -webkit-font-smoothing:antialiased;
    }

    /* ===== BACKGROUND GRID / GLOW ===== */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      background-image:
        linear-gradient(90deg,rgba(148,163,184,0.06) 1px,transparent 1px),
        linear-gradient(180deg,rgba(148,163,184,0.06) 1px,transparent 1px);
      background-size:40px 40px;
      opacity:.55;
      pointer-events:none;
      z-index:-2;
    }

    body::after{
      content:"";
      position:fixed;
      width:520px;
      height:520px;
      background:radial-gradient(circle,rgba(34,197,94,0.22),transparent 65%);
      top:-120px;
      left:50%;
      transform:translateX(-50%);
      filter:blur(8px);
      opacity:.7;
      z-index:-2;
      pointer-events:none;
    }

    .wrap{
      min-height:100%;
      display:flex;
      justify-content:center;
      padding:16px;
    }

    .panel{
      width:100%;
      max-width:460px;
      border-radius:18px;
      padding:16px 14px 18px;
      background:radial-gradient(circle at top,#020617,#020617 55%,#000 100%);
      border:1px solid rgba(148,163,184,0.35);
      box-shadow:
        0 24px 80px rgba(0,0,0,.95),
        0 0 0 1px rgba(15,23,42,0.9),
        0 0 22px rgba(34,197,94,0.18);
      position:relative;
      overflow:hidden;
    }

    .panel::before{
      content:"";
      position:absolute;
      inset:1px;
      border-radius:16px;
      background:radial-gradient(circle at 0 0,rgba(34,197,94,0.12),transparent 60%),
                 radial-gradient(circle at 100% 100%,rgba(56,189,248,0.16),transparent 55%);
      opacity:.9;
      pointer-events:none;
      z-index:-1;
    }

    .panel-inner{
      position:relative;
      z-index:1;
    }

    /* ===== HEADER / STATUS BAR ===== */
    .top-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:10px;
    }

    h1{
      margin:0;
      font-size:18px;
      color:var(--accent-strong);
      letter-spacing:.03em;
      display:flex;
      align-items:center;
      gap:6px;
    }

    .cipher-dot{
      width:7px;
      height:7px;
      border-radius:999px;
      background:var(--accent);
      box-shadow:0 0 12px rgba(34,197,94,0.9);
      animation:pulse-dot 1.4s infinite;
    }

    @keyframes pulse-dot{
      0%{transform:scale(1);opacity:0.9}
      50%{transform:scale(1.4);opacity:0.3}
      100%{transform:scale(1);opacity:0.9}
    }

    .status-pill{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:4px 9px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.4);
      background:linear-gradient(135deg,rgba(15,23,42,0.9),rgba(15,23,42,0.6));
      font-size:11px;
      color:var(--muted);
    }

    .status-dot{
      width:8px;
      height:8px;
      border-radius:999px;
      background:var(--accent);
      box-shadow:0 0 10px rgba(34,197,94,0.9);
    }

    .subtitle{
      font-size:12px;
      color:var(--muted);
      margin-top:2px;
      line-height:1.6;
    }

    .subtitle span{
      color:var(--accent-strong);
      font-weight:600;
    }

    /* ===== CONTROLS / INPUT BAR ===== */
    .controls{
      margin-top:14px;
      display:flex;
      gap:10px;
      align-items:flex-end;
      flex-wrap:wrap;
    }

    label{
      font-size:12px;
      font-weight:600;
      color:var(--muted);
      margin-bottom:4px;
      display:flex;
      align-items:center;
      gap:5px;
    }

    .chip{
      font-size:10px;
      padding:2px 6px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.5);
      color:var(--muted);
    }

    input[type=number]{
      padding:11px 10px;
      border-radius:10px;
      background:radial-gradient(circle at top,#020617,#020617 60%,#020617);
      border:1px solid rgba(148,163,184,0.4);
      color:#e5e7eb;
      font-weight:600;
      width:160px;
      font-size:14px;
      box-shadow:0 0 0 1px rgba(15,23,42,0.9);
    }

    input[type=number]::placeholder{
      color:#6b7280;
      font-weight:400;
    }

    input:focus{
      outline:none;
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.9),
        0 0 0 1px rgba(34,197,94,0.4),
        0 0 12px rgba(34,197,94,0.6);
      border-color:rgba(34,197,94,0.7);
    }

    .btn{
      padding:11px 14px;
      border:none;
      border-radius:12px;
      background:radial-gradient(circle at top,#22c55e,#16a34a);
      color:#022c22;
      font-weight:750;
      cursor:pointer;
      font-size:14px;
      width:100%;
      letter-spacing:.02em;
      text-shadow:0 0 6px rgba(15,118,110,0.7);
      box-shadow:
        0 10px 30px rgba(34,197,94,0.35),
        0 0 18px rgba(22,163,74,0.7);
      position:relative;
      overflow:hidden;
    }

    .btn span{
      position:relative;
      z-index:1;
    }

    .btn::before{
      content:"";
      position:absolute;
      inset:-40%;
      background:conic-gradient(from 0deg,rgba(34,197,94,0.1),transparent,transparent,rgba(56,189,248,0.16),transparent);
      animation:spin 2.4s linear infinite;
      opacity:0.8;
    }

    .btn::after{
      content:"";
      position:absolute;
      inset:2px;
      border-radius:10px;
      background:linear-gradient(180deg,#22c55e,#166534);
    }

    @keyframes spin{
      to{transform:rotate(360deg);}
    }

    .btn:disabled{
      opacity:0.6;
      cursor:not-allowed;
      box-shadow:none;
    }

    .btn:active:not(:disabled){
      transform:translateY(1px);
      box-shadow:
        0 6px 18px rgba(34,197,94,0.28),
        0 0 8px rgba(22,163,74,0.5);
    }

    /* ===== LOADER / STATUS LINE ===== */
    .loader{
      display:none;
      margin-top:12px;
      padding:8px 10px;
      border-radius:10px;
      background:radial-gradient(circle at 0 0,rgba(34,197,94,0.18),transparent 70%);
      border:1px dashed rgba(34,197,94,0.5);
      font-size:12px;
      color:var(--muted);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }

    .loader-left{
      display:flex;
      align-items:center;
      gap:8px;
    }

    .loader-dots{
      display:inline-flex;
      gap:4px;
    }

    .loader-dot{
      width:5px;
      height:5px;
      border-radius:999px;
      background:var(--accent-strong);
      opacity:0.25;
      animation:loaderBlink 1s infinite alternate;
    }

    .loader-dot:nth-child(2){animation-delay:.2s;}
    .loader-dot:nth-child(3){animation-delay:.4s;}

    @keyframes loaderBlink{
      0%{opacity:0.2;transform:translateY(0);}
      100%{opacity:1;transform:translateY(-2px);}
    }

    .loader-tag{
      font-size:10px;
      padding:2px 6px;
      border-radius:999px;
      border:1px solid rgba(34,197,94,0.6);
      color:var(--accent-strong);
      background:rgba(15,23,42,0.7);
    }

    /* ===== OUTPUT LIST ===== */
    .output{
      margin-top:16px;
      padding:14px 10px 8px;
      border-radius:14px;
      background:radial-gradient(circle at top,rgba(15,23,42,0.9),rgba(15,23,42,0.96));
      border:1px solid rgba(148,163,184,0.45);
      box-shadow:
        0 18px 50px rgba(0,0,0,0.8),
        0 0 18px rgba(15,23,42,0.9);
      display:none;
    }

    .output-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:8px;
      font-size:11px;
      color:var(--muted);
    }

    .output-header-code{
      font-family:ui-monospace,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      font-size:11px;
      color:#9ca3af;
      background:#020617;
      padding:3px 6px;
      border-radius:999px;
      border:1px solid rgba(31,41,55,0.8);
    }

    .list{
      display:flex;
      flex-direction:column;
      gap:9px;
    }

    .item{
      padding:9px 10px;
      border-radius:12px;
      background:radial-gradient(circle at 0 0,rgba(34,197,94,0.08),rgba(15,23,42,0.98));
      border:1px solid rgba(148,163,184,0.55);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      position:relative;
      overflow:hidden;
    }

    .item::before{
      content:"";
      position:absolute;
      inset:-2px;
      border-radius:inherit;
      border:1px solid transparent;
      background:linear-gradient(120deg,rgba(34,197,94,0.75),transparent,rgba(56,189,248,0.55)) border-box;
      -webkit-mask:linear-gradient(#000 0 0) padding-box,linear-gradient(#000 0 0);
      -webkit-mask-composite:xor;
              mask-composite:exclude;
      opacity:0.0;
      transition:opacity .18s ease-out;
    }

    .item:hover::before{
      opacity:0.26;
    }

    .item-main{
      display:flex;
      flex-direction:column;
      gap:2px;
    }

    .label{
      font-size:14px;
      font-weight:800;
      color:#e5e7eb;
    }

    .sub-label{
      font-size:11px;
      color:#9ca3af;
      font-family:ui-monospace,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
    }

    .meta{
      font-size:12px;
      color:#dbeafe;
      font-weight:700;
      background:var(--badge-bg);
      border-radius:999px;
      padding:4px 10px;
      white-space:nowrap;
      border:1px solid rgba(34,197,94,0.6);
      box-shadow:0 0 14px rgba(34,197,94,0.4);
    }

    .footer{
      text-align:center;
      margin-top:9px;
      font-size:11px;
      color:var(--muted);
      font-family:ui-monospace,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
    }

    @media (max-width:600px){
      .wrap{padding:12px}
      .panel{padding:14px 12px 16px}
      h1{font-size:17px}
      .controls{flex-direction:column;align-items:stretch}
      input[type=number]{width:100%}
      .btn{width:100%;font-size:15px;padding:12px 14px}
      .item{padding:9px 9px}
      .label{font-size:14px}
      .meta{font-size:11px;padding:3px 9px}
    }
  </style>
</head>

<body>
<div class="wrap">
  <div class="panel">
    <div class="panel-inner">
      <div class="top-row">
        <h1>
          <span class="cipher-dot"></span>
          مولّد نمط الرهانات
        </h1>
        <div class="status-pill">
          <span class="status-dot"></span>
          <span>وضع التحليل النمطي v1.4</span>
        </div>
      </div>

      <div class="subtitle">
        توليد <span>5 أنماط مختلفة</span> للرهان من ميزانية واحدة. إذا كان إجمالي الرهان أكبر من 15 درهم، يتم استخدام <span>لفة واحدة</span> فقط في هذا السطر.
      </div>

      <div class="controls">
        <div style="display:flex;flex-direction:column;width:100%">
          <label for="budget">
            الميزانية الكلية (MAD)
            <span class="chip">من 5 وما فوق</span>
          </label>
          <input id="budget" type="number" value="50" min="5" placeholder="مثال: 50">
        </div>
        <button id="gen" class="btn">
          <span>الحصول على الإستراتيجية</span>
        </button>
      </div>

      <!-- LOADER -->
      <div id="loader" class="loader">
        <div class="loader-left">
          <div class="loader-dots">
            <div class="loader-dot"></div>
            <div class="loader-dot"></div>
            <div class="loader-dot"></div>
          </div>
          <span>جاري تحليل النمط من ميزانيتك…</span>
        </div>
        <div class="loader-tag">SYSTEM: ACTIVE</div>
      </div>

      <div id="output" class="output">
        <div class="output-header">
          <span>نتيجة آخر تحليل</span>
          <span class="output-header-code" id="sessionTag">SESSION #0000</span>
        </div>
        <div id="list" class="list"></div>
        <div id="footer" class="footer"></div>
      </div>
    </div>
  </div>
</div>

<script>
(function(){

  // ====== UTILITIES ======

  function randomUnique5(){
    const s = new Set();
    while (s.size < 5){
      s.add(Math.floor(Math.random()*100) + 10);
    }
    return Array.from(s);
  }

  function computePattern(budget){
    const raw = randomUnique5();
    const sumRaw = raw.reduce((a,b)=>a+b,0);
    const scaled = raw.map(v => v / sumRaw * budget);

    let rounded = scaled.map(v => Math.floor(v));
    let diff = budget - rounded.reduce((a,b)=>a+b,0);

    while (diff > 0){
      const i = Math.floor(Math.random()*5);
      rounded[i]++;
      diff--;
    }

    const used = new Set();
    for (let i=0;i<5;i++){
      while (used.has(rounded[i])){
        rounded[i]++;
      }
      used.add(rounded[i]);
    }

    for (let i = rounded.length - 1; i > 0; i--){
      const j = Math.floor(Math.random() * (i + 1));
      [rounded[i], rounded[j]] = [rounded[j], rounded[i]];
    }

    return rounded;
  }

  function generateSpins(sum){
    if (sum > 15) return 1;
    return Math.floor(Math.random()*6) + 2; // 2–7
  }

  function generateSessionId(){
    const now = Date.now().toString(16).slice(-4);
    const rand = Math.floor(Math.random()*4096).toString(16).padStart(3,"0");
    return `#${now.toUpperCase()}-${rand.toUpperCase()}`;
  }

  // ====== RENDER ======

  function render(pattern, budget){
    const list = document.getElementById("list");
    const out = document.getElementById("output");
    const footer = document.getElementById("footer");
    const sessionTag = document.getElementById("sessionTag");

    list.innerHTML = "";

    sessionTag.textContent = "SESSION " + generateSessionId();

    for (let i=0;i<5;i++){
      const total = pattern[i];
      const spins = generateSpins(total);

      const div = document.createElement("div");
      div.className = "item";

      const main = document.createElement("div");
      main.className = "item-main";

      const label = document.createElement("div");
      label.className = "label";
      label.textContent = `إجمالي الرهان: ${total} MAD`;

      const sub = document.createElement("div");
      sub.className = "sub-label";
      sub.textContent = `خط رقم ${i+1} — high-variance pattern`;

      const meta = document.createElement("div");
      meta.className = "meta";
      meta.textContent = `عدد اللفات: ${spins}`;

      main.appendChild(label);
      main.appendChild(sub);
      div.appendChild(main);
      div.appendChild(meta);
      list.appendChild(div);
    }

    const sum = pattern.reduce((a,b)=>a+b,0);
    footer.textContent = `TOTAL DISTRIBUTED = ${sum} MAD   |   INPUT BUDGET = ${budget} MAD`;

    out.style.display = "block";
  }

  // ====== INTERACTION ======

  const btn = document.getElementById("gen");
  const loader = document.getElementById("loader");
  const output = document.getElementById("output");

  btn.addEventListener("click", () => {
    const budget = parseInt(document.getElementById("budget").value, 10) || 0;
    if (budget <= 0){
      alert("أدخل ميزانية صحيحة من فضلك (أعلى من 0).");
      return;
    }

    btn.disabled = true;
    loader.style.display = "flex";
    output.style.display = "none";

    setTimeout(() => {
      const pattern = computePattern(budget);
      render(pattern, budget);

      loader.style.display = "none";
      btn.disabled = false;
    }, 1500); // задержка 1.5 секунды
  });

})();
</script>
</body>
</html>
